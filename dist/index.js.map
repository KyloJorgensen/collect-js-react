{"version":3,"file":"index.js","sources":["../src/state.ts","../src/provider.tsx","../src/constants.ts","../src/Fields.tsx","../src/Form.tsx","../src/types/HttpStatusCode.ts"],"sourcesContent":["import { IVGSCollectForm } from './types/Form';\n\nlet form = {} as IVGSCollectForm;\n\nconst setFormInstance = (newVal: IVGSCollectForm) => {\n  form = newVal;\n};\n\nconst getFormInstance = () => form;\n\nexport { setFormInstance, getFormInstance };\n","import React, { createContext, useContext, useReducer, useMemo, Dispatch } from 'react';\nimport { HttpStatusCode } from 'types/HttpStatusCode';\nimport { VGSCollectFormState } from './types/Form';\n\ntype GlobalStateContext = VGSCollectFormState | undefined;\ntype GlobalSubmitContext = { status: HttpStatusCode, data: any } | undefined;\n\nexport const initialState = undefined;\n\nexport const GlobalSubmitContext = createContext<GlobalSubmitContext>(initialState);\nexport const DispatchSubmitContext = createContext({} as Dispatch<any>);\nexport const GlobalStateContext = createContext<GlobalStateContext>(initialState);\nexport const DispatchStateContext = createContext({} as Dispatch<any>);\n\nexport const GlobalStateProvider = ({ children }: any) => {\n  const [state, dispatch] = useReducer(\n    (_state: GlobalStateContext, newValue: any) => {\n      return newValue ? { ...newValue } : initialState;\n    },\n    initialState\n  );\n  const [response, dispatchSubmit] = useReducer(\n    (_state: GlobalSubmitContext, newValue: any) => {\n      return newValue ? { ...newValue } : initialState;\n    },\n    initialState\n  );\n\n  const memoState = useMemo(\n    () => (state),\n    [state]\n  );\n\n  const memoResponse = useMemo(\n    () => (response),\n    [response]\n  );\n\n  return (\n    <div>\n      <GlobalStateContext.Provider value={memoState}>\n        <DispatchStateContext.Provider value={dispatch}>\n          <GlobalSubmitContext.Provider value={memoResponse}>\n            <DispatchSubmitContext.Provider value={dispatchSubmit}>\n              {children}\n            </DispatchSubmitContext.Provider>\n          </GlobalSubmitContext.Provider>\n        </DispatchStateContext.Provider>\n      </GlobalStateContext.Provider>\n    </div>\n  );\n};\n\nexport const useVGSCollectState = () => [\n  useContext(GlobalStateContext),\n];\n\nexport const useVGSCollectResponse = () => [\n  useContext(GlobalSubmitContext)\n];\n\nexport const VGSCollectProvider = ({ children }: any) => {\n  return <GlobalStateProvider>{children}</GlobalStateProvider>;\n};\n","const FIELD_EVENTS = {\n  onFocus: 'focus',\n  onBlur: 'blur',\n  onUpdate: 'update',\n  onDelete: 'delete',\n  onKeyUp: 'keyup',\n  onKeyDown: 'keydown',\n  onKeyPress: 'keypress'\n};\n\nconst DEFAULT_CONFIG = {\n  TEXT: {\n    type: 'text',\n    placeholder: 'Cardholder Name'\n  },\n  CARD_NUMBER: {\n    type: 'card-number',\n    placeholder: 'Credit Card Number'\n  },\n  CARD_EXPIRATION_DATE: {\n    type: 'card-expiration-date',\n    placeholder: 'Card Expiration Date'\n  },\n  CARD_SECURITY_CODE: {\n    type: 'card-security-code',\n    placeholder: 'CVC/CVV'\n  },\n  PASSWORD: {\n    type: 'password',\n    placeholder: 'Enter password'\n  },\n  SSN: {\n    type: 'ssn',\n    placeholder: 'SSN'\n  },\n  ZIP_CODE: {\n    type: 'zip-code',\n    placeholder: 'Zip Code'\n  },\n  TEXTAREA: {\n    type: 'textarea',\n    placeholder: 'Comment'\n  },\n  NUMBER: {\n    type: 'number',\n    placeholder: 'Number'\n  },\n  FILE: {\n    type: 'file',\n    placeholder: ''\n  },\n  DATE: {\n    type: 'date',\n    placeholder: ''\n  }\n};\n\nexport { DEFAULT_CONFIG, FIELD_EVENTS };\n","import React from 'react';\nimport { useEffect } from 'react';\nimport { getFormInstance } from './state';\nimport { DEFAULT_CONFIG, FIELD_EVENTS } from './constants';\n\nimport {\n  IVGSCollectTextField,\n  IVGSCollectCardNumberField,\n  IVGSCollectCardExpirationField,\n  IVGSCollectCardCVCField,\n  IVGSCollectPasswordField,\n  IVGSCollectSSNField,\n  IVGSCollectNumberField,\n  IVGSCollectZipCodeField,\n  IVGSCollectTextareaField,\n  IVGSCollectFileField,\n  IVGSCollectDateField,\n  IVGSCollectForm,\n  VGSCollectStateParams,\n} from './types/Form';\n\nimport {\n  VGSCollectKeyboardEventData,\n  VGSCollectFocusEventData,\n} from './types/Field';\n\ntype GeneralFieldProps = {\n  className: string;\n  onFocus: (info: VGSCollectFocusEventData) => void;\n  onBlur: (info: VGSCollectFocusEventData) => void;\n  onUpdate: (state: VGSCollectStateParams) => void;\n  onDelete: () => void;\n  onKeyUp: (info: VGSCollectKeyboardEventData) => void;\n  onKeyDown: (info: VGSCollectKeyboardEventData) => void;\n  onKeyPress: (info: VGSCollectKeyboardEventData) => void;\n}\n\nfunction RenderField(props: any) {\n  const {\n    className,\n    onFocus,\n    onBlur,\n    onUpdate,\n    onDelete,\n    onKeyPress,\n    onKeyUp,\n    onKeyDown,\n    ...fieldProps\n  } = props;\n\n  if (!props.name) {\n    throw new Error(`@vgs/collect-js-react: name attribute for ${props.type} is required.`);\n  }\n\n  const [fieldId] = React.useState(() => `vgs-${window.crypto.randomUUID()}`);\n  const events = {\n    onFocus,\n    onBlur,\n    onUpdate,\n    onKeyUp,\n    onKeyDown,\n    onKeyPress,\n    onDelete\n  };\n\n  const eventsToListen = Object.keys(events).filter(e => events[e] !== undefined);\n\n  useEffect(() => {\n    const collectFormInstance = getFormInstance() as IVGSCollectForm;\n\n    if (Object.keys(collectFormInstance).length !== 0) {\n      const secureField = collectFormInstance.field(`#${fieldId}`, fieldProps);\n\n      eventsToListen.forEach(event => {\n        secureField.on(FIELD_EVENTS[event], (info) => { events[event](info) })\n      });\n\n      return () => {\n        try {\n          secureField?.delete?.();\n        } catch (error) {\n          if (\n            !(error instanceof Error) ||\n            (error instanceof Error &&\n              error.message !==\n                `The field '${fieldProps?.name}' is already deleted`)\n          ) {\n            throw error;\n          }\n        }\n        eventsToListen.forEach(event => {\n          secureField.off(FIELD_EVENTS[event], (info) => { events[event](info) })\n        });\n      }\n    }\n  }, []);\n\n  return (\n    <div className={`vgs-collect-iframe-wr ${className ? className : ''}`} id={fieldId} data-testid=\"vgs-collect-field-wrapper\"></div>\n  )\n}\n\nconst TextField = React.memo((props: Partial<IVGSCollectTextField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.TEXT,\n      }, props)}\n    />\n  )\n});\n\nconst CardNumberField = React.memo((props: Partial<IVGSCollectCardNumberField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.CARD_NUMBER,\n      }, props)}\n    />\n  )\n});\n\nconst CardExpirationDateField = React.memo((props: Partial<IVGSCollectCardExpirationField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.CARD_EXPIRATION_DATE,\n      }, props)}\n    />\n  )\n});\n\nconst CardSecurityCodeField = React.memo((props: Partial<IVGSCollectCardCVCField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.CARD_SECURITY_CODE,\n      }, props)}\n    />\n  )\n});\n\nconst PasswordField = React.memo((props: Partial<IVGSCollectPasswordField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.PASSWORD,\n      }, props)}\n    />\n  )\n});\n\nconst SSNField = React.memo((props: Partial<IVGSCollectSSNField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.SSN,\n      }, props)}\n    />\n  )\n});\n\nconst ZipCodeField = React.memo((props: Partial<IVGSCollectZipCodeField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.ZIP_CODE,\n      }, props)}\n    />\n  )\n});\n\nconst TextareaField = React.memo((props: Partial<IVGSCollectTextareaField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.TEXTAREA,\n      }, props)}\n    />\n  )\n});\n\nconst NumberField = React.memo((props: Partial<IVGSCollectNumberField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.NUMBER,\n      }, props)}\n    />\n  )\n});\n\nconst DateField = React.memo((props: Partial<IVGSCollectDateField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.DATE,\n      }, props)}\n    />\n  )\n});\n\nconst FileField = React.memo((props: Partial<IVGSCollectFileField & GeneralFieldProps>) => {\n  return (\n    <RenderField\n      {...Object.assign({\n        ...DEFAULT_CONFIG.FILE,\n      }, props)}\n    />\n  )\n});\n\nexport {\n  TextField,\n  CardNumberField,\n  CardExpirationDateField,\n  CardSecurityCodeField,\n  PasswordField,\n  SSNField,\n  ZipCodeField,\n  TextareaField,\n  NumberField,\n  FileField,\n  DateField\n};\n","import React, { useEffect, useContext } from 'react';\nimport { setFormInstance, getFormInstance } from './state';\nimport { DispatchStateContext, DispatchSubmitContext } from \"./provider\";\nimport { HttpStatusCode } from './types/HttpStatusCode';\nimport {\n  IVGSCollectForm,\n  VGSCollectFormState,\n  ICollectFormProps\n} from './types/Form';\n\nimport {\n  TextField,\n  CardNumberField,\n  CardExpirationDateField,\n  CardSecurityCodeField,\n  PasswordField,\n  SSNField,\n  ZipCodeField,\n  TextareaField,\n  NumberField,\n  DateField,\n  FileField\n} from './Fields';\n\nconst isBrowser = typeof window !== 'undefined';\n\nexport function VGSCollectForm(props: ICollectFormProps) {\n  const {\n    vaultId,\n    environment = 'sandbox',\n    action = '/',\n    cname,\n    submitParameters,\n    tokenizationAPI = false,\n    onUpdateCallback,\n    onSubmitCallback,\n    onErrorCalback,\n    children\n  } = props;\n\n  if (!vaultId) {\n    throw new Error(`@vgs/collect-js-react: vaultId is required.`);\n  }\n\n  const dispatchFormStateUpdate = useContext(DispatchStateContext);\n  const dispatchResponseUpdate = useContext(DispatchSubmitContext);\n\n\n  const isProviderExists = (\n    typeof dispatchResponseUpdate === 'function' &&\n    typeof dispatchResponseUpdate === 'function'\n  )\n\n  if (\n    isBrowser &&\n    window.VGSCollect &&\n    Object.keys(getFormInstance()).length === 0\n  ) {\n    const form: IVGSCollectForm = window.VGSCollect.create(vaultId, environment, (state: VGSCollectFormState) => {\n      if (onUpdateCallback) {\n        onUpdateCallback(state);\n      };\n      isProviderExists && dispatchFormStateUpdate(state);\n    });\n\n    if (cname) {\n      form.useCname(cname);\n    }\n    setFormInstance(form);\n  }\n\n  useEffect(() => {\n    return () => {\n      const activeForm = getFormInstance();\n      if (Object.keys(activeForm).length !== 0) {\n        activeForm.unmount();\n        setFormInstance({} as IVGSCollectForm);\n      }\n      if (isProviderExists) {\n        dispatchFormStateUpdate(null);\n        dispatchResponseUpdate(null);\n      }\n    }\n  }, []);\n\n  const submitHandler = (e: React.SyntheticEvent) => {\n    e.preventDefault();\n\n    const form: IVGSCollectForm = getFormInstance();\n\n    if (!form) {\n      throw new Error('@vgs/collect-js-react: VGS Collect form not found.')\n    }\n\n    if (tokenizationAPI) {\n      form.tokenize(\n        (status: HttpStatusCode | null, resp: any) => {\n          if (onSubmitCallback) {\n            onSubmitCallback(status, resp);\n          }\n        },\n        (errors: any) => {\n          if (onErrorCalback) {\n            onErrorCalback(errors);\n          }\n        }\n      );\n    } else {\n      form.submit(action, submitParameters,\n        (status: HttpStatusCode | null, data: any) => {\n          if (onSubmitCallback) {\n            onSubmitCallback(status, data);\n          }\n          dispatchResponseUpdate({\n            status,\n            data\n          });\n        },\n        (errors: any) => {\n          if (onErrorCalback) {\n            onErrorCalback(errors);\n          }\n        }\n      );\n    }\n  }\n\n  return (\n    <form\n      onSubmit={(event) => {\n        submitHandler(event)\n      }}\n    >\n      {children}\n    </form>\n  )\n}\n\nVGSCollectForm.TextField = TextField;\nVGSCollectForm.CardNumberField = CardNumberField;\nVGSCollectForm.CardExpirationDateField = CardExpirationDateField;\nVGSCollectForm.CardSecurityCodeField = CardSecurityCodeField;\nVGSCollectForm.PasswordField = PasswordField;\nVGSCollectForm.SSNField = SSNField;\nVGSCollectForm.ZipCodeField = ZipCodeField;\nVGSCollectForm.TextareaField = TextareaField;\nVGSCollectForm.NumberField = NumberField;\nVGSCollectForm.FileField = FileField;\nVGSCollectForm.DateField = DateField;\n","enum HttpStatusCode {\n  CONTINUE = 100,\n  SWITCHING_PROTOCOLS = 101,\n  PROCESSING = 102,\n  OK = 200,\n  CREATED = 201,\n  ACCEPTED = 202,\n  NON_AUTHORITATIVE_INFORMATION = 203,\n  NO_CONTENT = 204,\n  RESET_CONTENT = 205,\n  PARTIAL_CONTENT = 206,\n  MULTI_STATUS = 207,\n  ALREADY_REPORTED = 208,\n  IM_USED = 226,\n  MULTIPLE_CHOICES = 300,\n  MOVED_PERMANENTLY = 301,\n  FOUND = 302,\n  SEE_OTHER = 303,\n  NOT_MODIFIED = 304,\n  USE_PROXY = 305,\n  SWITCH_PROXY = 306,\n  TEMPORARY_REDIRECT = 307,\n  PERMANENT_REDIRECT = 308,\n  BAD_REQUEST = 400,\n  UNAUTHORIZED = 401,\n  PAYMENT_REQUIRED = 402,\n  FORBIDDEN = 403,\n  NOT_FOUND = 404,\n  METHOD_NOT_ALLOWED = 405,\n  NOT_ACCEPTABLE = 406,\n  PROXY_AUTHENTICATION_REQUIRED = 407,\n  REQUEST_TIMEOUT = 408,\n  CONFLICT = 409,\n  GONE = 410,\n  LENGTH_REQUIRED = 411,\n  PRECONDITION_FAILED = 412,\n  PAYLOAD_TOO_LARGE = 413,\n  URI_TOO_LONG = 414,\n  UNSUPPORTED_MEDIA_TYPE = 415,\n  RANGE_NOT_SATISFIABLE = 416,\n  EXPECTATION_FAILED = 417,\n  I_AM_A_TEAPOT = 418,\n  MISDIRECTED_REQUEST = 421,\n  UNPROCESSABLE_ENTITY = 422,\n  LOCKED = 423,\n  FAILED_DEPENDENCY = 424,\n  UPGRADE_REQUIRED = 426,\n  PRECONDITION_REQUIRED = 428,\n  TOO_MANY_REQUESTS = 429,\n  REQUEST_HEADER_FIELDS_TOO_LARGE = 431,\n  UNAVAILABLE_FOR_LEGAL_REASONS = 451,\n  INTERNAL_SERVER_ERROR = 500,\n  NOT_IMPLEMENTED = 501,\n  BAD_GATEWAY = 502,\n  SERVICE_UNAVAILABLE = 503,\n  GATEWAY_TIMEOUT = 504,\n  HTTP_VERSION_NOT_SUPPORTED = 505,\n  VARIANT_ALSO_NEGOTIATES = 506,\n  INSUFFICIENT_STORAGE = 507,\n  LOOP_DETECTED = 508,\n  NOT_EXTENDED = 510,\n  NETWORK_AUTHENTICATION_REQUIRED = 511,\n  NETWORK_ERROR = 'Network Error'\n}\n\nexport { HttpStatusCode };\n"],"names":["form","setFormInstance","newVal","getFormInstance","initialState","undefined","GlobalSubmitContext","createContext","DispatchSubmitContext","GlobalStateContext","DispatchStateContext","GlobalStateProvider","children","useReducer","_state","newValue","state","dispatch","response","dispatchSubmit","memoState","useMemo","memoResponse","React","Provider","value","useVGSCollectState","useContext","useVGSCollectResponse","VGSCollectProvider","FIELD_EVENTS","onFocus","onBlur","onUpdate","onDelete","onKeyUp","onKeyDown","onKeyPress","DEFAULT_CONFIG","TEXT","type","placeholder","CARD_NUMBER","CARD_EXPIRATION_DATE","CARD_SECURITY_CODE","PASSWORD","SSN","ZIP_CODE","TEXTAREA","NUMBER","FILE","DATE","RenderField","props","className","fieldProps","name","Error","useState","window","crypto","randomUUID","fieldId","events","eventsToListen","Object","keys","filter","e","useEffect","collectFormInstance","length","secureField","field","forEach","event","on","info","error","message","off","id","TextField","memo","assign","CardNumberField","CardExpirationDateField","CardSecurityCodeField","PasswordField","SSNField","ZipCodeField","TextareaField","NumberField","DateField","FileField","isBrowser","VGSCollectForm","vaultId","environment","action","cname","submitParameters","tokenizationAPI","onUpdateCallback","onSubmitCallback","onErrorCalback","dispatchFormStateUpdate","dispatchResponseUpdate","isProviderExists","VGSCollect","create","useCname","activeForm","unmount","submitHandler","preventDefault","tokenize","status","resp","errors","submit","data","onSubmit","HttpStatusCode"],"mappings":"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"}